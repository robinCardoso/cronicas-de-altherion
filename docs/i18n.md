# 🌍 Sistema de Internacionalização (i18n)

## 📋 Visão Geral

O "Crônicas de Altherion" implementa um sistema completo de múltiplas linguagens usando **Context API** e **arquivos JSON** para traduções.

## 🚀 Linguagens Suportadas

- **🇧🇷 Português (pt)** - Idioma padrão
- **🇺🇸 English (en)** - Inglês
- **🇪🇸 Español (es)** - Espanhol

## 🏗️ Arquitetura

### Estrutura de Arquivos
```
src/
├── contexts/
│   └── LanguageContext.tsx    # Contexto de linguagem
├── components/
│   └── ui/
│       └── LanguageSelector.tsx # Seletor de idioma
└── locales/                   # Arquivos de tradução (desenvolvimento)
public/
└── locales/                   # Arquivos de tradução (produção)
    ├── pt.json
    ├── en.json
    └── es.json
```

### Context API
- **LanguageProvider**: Gerencia o estado global da linguagem
- **useLanguage**: Hook para acessar o contexto
- **useTranslation**: Hook simplificado para traduções

## 🎯 Como Usar

### 1. Hook de Tradução
```tsx
import { useTranslation } from '@/contexts/LanguageContext'

function MyComponent() {
  const { t } = useTranslation()
  
  return <h1>{t('game.title')}</h1>
}
```

### 2. Interpolação de Variáveis
```tsx
// No arquivo JSON
{
  "welcome": "Bem-vindo, {name}!"
}

// No componente
<p>{t('welcome', { name: 'João' })}</p>
// Resultado: "Bem-vindo, João!"
```

### 3. Seletor de Idioma
```tsx
import { LanguageSelector } from '@/components/ui/LanguageSelector'

function Header() {
  return (
    <header>
      <LanguageSelector size="md" />
    </header>
  )
}
```

## 📝 Estrutura das Traduções

### Organização Hierárquica
```json
{
  "common": {
    "loading": "Carregando...",
    "error": "Erro"
  },
  "game": {
    "title": "Crônicas de Altherion",
    "welcome": "Bem-vindo a Altherion"
  },
  "character": {
    "level": "Nível",
    "attributes": {
      "strength": "Força"
    }
  }
}
```

### Chaves de Tradução
- **common**: Elementos comuns (botões, mensagens)
- **game**: Textos do jogo principal
- **character**: Sistema de personagens
- **classes**: Informações das classes
- **modal**: Textos dos modais
- **narrative**: Interface de narrativa
- **nextSteps**: Seção de próximos passos

## 🔧 Funcionalidades

### 1. Detecção Automática
- Detecta idioma do navegador
- Fallback para português se idioma não suportado

### 2. Persistência
- Salva idioma escolhido no localStorage
- Mantém preferência entre sessões

### 3. Carregamento Dinâmico
- Carrega traduções sob demanda
- Fallback automático em caso de erro

### 4. Interpolação
- Suporte a variáveis dinâmicas
- Sintaxe: `{variableName}`

## 🎨 Componente LanguageSelector

### Props
```tsx
interface LanguageSelectorProps {
  className?: string
  size?: 'sm' | 'md' | 'lg'
}
```

### Características
- **Dropdown animado** com Framer Motion
- **Bandeiras** para identificação visual
- **Indicador de seleção** (✓)
- **Responsivo** para diferentes tamanhos

## 🚀 Adicionando Novas Linguagens

### 1. Criar Arquivo de Tradução
```bash
# Criar arquivo para nova linguagem
touch public/locales/fr.json
```

### 2. Adicionar ao Seletor
```tsx
// Em LanguageSelector.tsx
const languages = [
  { code: 'pt' as Language, name: 'Português', flag: '🇧🇷' },
  { code: 'en' as Language, name: 'English', flag: '🇺🇸' },
  { code: 'es' as Language, name: 'Español', flag: '🇪🇸' },
  { code: 'fr' as Language, name: 'Français', flag: '🇫🇷' } // Nova linguagem
]
```

### 3. Atualizar Tipos
```tsx
// Em LanguageContext.tsx
export type Language = 'pt' | 'en' | 'es' | 'fr'
```

## 📊 Vantagens da Implementação

### ✅ Prós
- **Simples de usar**: Hook `useTranslation` intuitivo
- **Flexível**: Fácil adicionar novas linguagens
- **Performático**: Carregamento sob demanda
- **Persistente**: Salva preferência do usuário
- **Fallback**: Sistema robusto de fallback
- **Interpolação**: Suporte a variáveis dinâmicas

### ⚠️ Considerações
- **Arquivos JSON**: Precisa manter sincronizados
- **Chaves**: Estrutura hierárquica pode ser complexa
- **Tamanho**: Múltiplos arquivos de tradução

## 🔮 Futuras Melhorias

### 1. Pluralização
```json
{
  "items": {
    "zero": "Nenhum item",
    "one": "1 item",
    "other": "{count} itens"
  }
}
```

### 2. Formatação de Datas
```tsx
t('date', { date: new Date() })
```

### 3. Lazy Loading
```tsx
const translations = await import(`/locales/${language}.json`)
```

### 4. Validação de Traduções
```tsx
// Verificar se todas as chaves existem em todas as linguagens
validateTranslations()
```

## 🎯 Exemplos Práticos

### Tradução Simples
```tsx
<h1>{t('game.title')}</h1>
```

### Com Variáveis
```tsx
<p>{t('game.welcomeAdventure', { name: character.nome })}</p>
```

### Com Fallback
```tsx
// Se a chave não existir, retorna a própria chave
<span>{t('chave.inexistente')}</span> // Resultado: "chave.inexistente"
```

---

**Sistema implementado com sucesso! 🌍✨**
